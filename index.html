<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vegas Slot Demo</title>

<style>
body{
    margin:0;
    background:#1a0000;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI Emoji",Arial;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    color:#fff;
}

.machine{
    width:340px;
    background:#8b0000;
    border:6px solid gold;
    border-radius:20px;
    padding:20px;
    text-align:center;
}

.reels{
    display:flex;
    justify-content:center;
    gap:10px;
    margin:20px 0;
}

.reel{
    width:80px;
    height:100px;
    overflow:hidden;
    background:#000;
    border-radius:10px;
    position:relative;
}

.symbol{
    position:absolute;
    width:100%;
    font-size:60px;
    text-align:center;
    top:0;
    transition:top 0.1s linear;
}

button{
    padding:10px 20px;
    border:none;
    border-radius:15px;
    background:gold;
    font-weight:bold;
}

.credits{
    margin-top:10px;
}

.result{
    margin-top:10px;
    height:20px;
}
</style>
</head>

<body>

<div class="machine">
    <h2>ðŸŽ° Vegas Slot</h2>

    <div class="reels">
        <div class="reel"><div class="symbol" id="r1">ðŸ””</div></div>
        <div class="reel"><div class="symbol" id="r2">ðŸ””</div></div>
        <div class="reel"><div class="symbol" id="r3">ðŸ””</div></div>
    </div>

    <button onclick="spin()">Girar (1 ficha)</button>

    <div class="credits">Fichas: <span id="credit">10</span></div>
    <div class="result" id="result"></div>
</div>

<script>
let credit = 10;

const prizes = [
    {symbol:"ðŸ””", chance:80, reward:1},
    {symbol:"ðŸ’", chance:13, reward:2},
    {symbol:"ðŸ‹", chance:5, reward:4},
    {symbol:"ðŸ’Ž", chance:1, reward:8},
    {symbol:"7ï¸âƒ£", chance:0.001, reward:15}
];

function weighted(){
    let total = prizes.reduce((a,b)=>a+b.chance,0);
    let r = Math.random()*total;
    let sum = 0;
    for(let p of prizes){
        sum += p.chance;
        if(r <= sum) return p;
    }
}

function animate(id, finalSymbol, delay){
    let el = document.getElementById(id);
    let symbols = ["ðŸ””","ðŸ’","ðŸ‹","ðŸ’Ž","7ï¸âƒ£"];
    let pos = 0;

    let interval = setInterval(()=>{
        el.innerHTML = symbols[Math.floor(Math.random()*symbols.length)];
        el.style.top = (pos % 10) + "px";
        pos += 10;
    },100);

    setTimeout(()=>{
        clearInterval(interval);
        el.style.top = "0px";
        el.innerHTML = finalSymbol;
    },delay);
}

function spin(){

    if(credit <= 0){
        alert("Sem fichas");
        return;
    }

    credit--;
    document.getElementById("credit").innerText = credit;
    document.getElementById("result").innerText = "Girando...";

    let p1 = weighted();
    let p2 = weighted();
    let p3 = weighted();

    animate("r1", p1.symbol, 1500);
    animate("r2", p2.symbol, 2000);
    animate("r3", p3.symbol, 2500);

    setTimeout(()=>{
        if(p1.symbol === p2.symbol && p2.symbol === p3.symbol){
            credit += p1.reward;
            document.getElementById("credit").innerText = credit;
            document.getElementById("result").innerText = "ðŸŽ‰ Ganhou " + p1.reward + " fichas!";
        }else{
            document.getElementById("result").innerText = "Tente novamente!";
        }
    },2600);
}
</script>

</body>
</html>
